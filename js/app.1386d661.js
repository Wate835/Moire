(function(){"use strict";var e={5133:function(e,t,a){var r=a(9242),s=a(3396);function i(e,t,a,i,o,l){const n=(0,s.up)("the-header"),c=(0,s.up)("router-view"),d=(0,s.up)("the-footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s.Wm)(c,null,{default:(0,s.w5)((({Component:e})=>[(0,s.Wm)(r.uT,{name:"route",mode:"out-in"},{default:(0,s.w5)((()=>[((0,s.wg)(),(0,s.j4)((0,s.LL)(e)))])),_:2},1024)])),_:1}),(0,s.Wm)(d)],64)}var o=a(65);const l={class:"header container"},n={class:"header__wrapper"},c=(0,s._)("span",{class:"header__info"},"Каталог",-1),d=(0,s._)("img",{src:"img/svg/logo-moire.svg",alt:"Логотип интернет магазина Moire",width:"116",height:"34"},null,-1),u=(0,s._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1);function _(e,t,a,r,i,o){const _=(0,s.up)("router-link"),m=(0,s.up)("cart-logo");return(0,s.wg)(),(0,s.iD)("header",l,[(0,s._)("div",n,[c,(0,s.Wm)(_,{class:"header__logo",to:{name:"main"}},{default:(0,s.w5)((()=>[d])),_:1}),u,(0,s.Wm)(m)])])}var m=a(7139);const p=(0,s._)("svg",{width:"19",height:"24"},[(0,s._)("use",{"xlink:href":"#icon-cart"})],-1),g={key:0,class:"header__count","aria-label":"Количество товаров"},h={key:1,class:"header__count","aria-label":"Количество товаров"},f={key:2,class:"header__count","aria-label":"Количество товаров"};function y(e,t,a,r,i,o){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.j4)(l,{class:"header__cart","aria-label":"Корзина с товарами",to:{name:"cart"}},{default:(0,s.w5)((()=>[p,e.$store.state.isCartLoading?((0,s.wg)(),(0,s.iD)("span",g,"...")):e.$store.state.isCartLoadingFailed?((0,s.wg)(),(0,s.iD)("span",h,"!")):((0,s.wg)(),(0,s.iD)("span",f,(0,m.zw)(e.$store.state.cartData.length),1))])),_:1})}var b={},v=a(89);const w=(0,v.Z)(b,[["render",y]]);var k=w,I={components:{CartLogo:k}};const D=(0,v.Z)(I,[["render",_]]);var C=D;const P={class:"footer container"},F=(0,s.uE)('<div class="footer__wrapper"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@moire.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2022 Moire </span></div>',1),$=[F];function L(e,t){return(0,s.wg)(),(0,s.iD)("footer",P,$)}const z={},A=(0,v.Z)(z,[["render",L]]);var S=A,V={components:{TheHeader:C,TheFooter:S},created(){const e=localStorage.getItem("userAccessKey");e&&this.updateAccessKey(e),this.loadCart()},methods:{...(0,o.nv)(["loadCart"]),...(0,o.OI)(["updateAccessKey"])}};const T=(0,v.Z)(V,[["render",i]]);var x=T,M=a(678);const U={class:"content container"},E={class:"content__top"},K={class:"content__row"},O={class:"content__header"},W=(0,s._)("h1",{class:"content__title"},"Каталог",-1),j={class:"content__info"},q={class:"content__count"},Z={class:"form__block__count"},H=(0,s._)("span",{class:"form__legend form__legend__count"},"Количество товаров на странице",-1),Y={class:"form__label form__label--select form__label__count"},B=(0,s._)("option",{value:"6"},"6",-1),Q=(0,s._)("option",{value:"12"},"12",-1),R=(0,s._)("option",{value:"18"},"18",-1),G=[B,Q,R],J={class:"content__catalog"},N={class:"catalog"},X={key:0,class:"loader-wrapper"},ee={key:1},te={key:2};function ae(e,t,a,i,o,l){const n=(0,s.up)("products-filter"),c=(0,s.up)("base-loader"),d=(0,s.up)("products-list"),u=(0,s.up)("base-pagination");return(0,s.wg)(),(0,s.iD)("main",U,[(0,s._)("div",E,[(0,s._)("div",K,[(0,s._)("div",O,[W,(0,s._)("span",j," Количество товаров: "+(0,m.zw)(l.total),1)]),(0,s._)("div",q,[(0,s._)("fieldset",Z,[H,(0,s._)("label",Y,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[0]||(t[0]=e=>o.productsPerPage=e)},G,512),[[r.bM,o.productsPerPage]])])])])])]),(0,s._)("div",J,[(0,s.Wm)(n,{filters:o.filters,onChangeFilters:l.setFilters},null,8,["filters","onChangeFilters"]),(0,s._)("section",N,[l.isLoading?((0,s.wg)(),(0,s.iD)("div",X,[(0,s.Wm)(c)])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("h2",ee," Возникла ошибка при загрузке товаров. Попробуйте позже. ")):l.products.length?((0,s.wg)(),(0,s.j4)(d,{key:3,products:l.products},null,8,["products"])):((0,s.wg)(),(0,s.iD)("h2",te," Нет товаров по вашему запросу. Попробуйте поискать что-нибудь другое! ")),l.products.length?((0,s.wg)(),(0,s.j4)(u,{key:4,page:o.page,perPage:o.productsPerPage,total:l.total,onChangePage:l.setPage},null,8,["page","perPage","total","onChangePage"])):(0,s.kq)("",!0)])])])}const re={key:0,class:"filter"},se={class:"loader-wrapper"},ie={key:1,class:"filter"},oe=(0,s._)("h2",null," Произошла ошибка при загрузке фильтров! Попробуйте перезагрузить страницу. ",-1),le=[oe],ne={key:2,class:"filter"},ce={class:"form__block"},de=(0,s._)("legend",{class:"form__legend"},"Цена",-1),ue={class:"form__label form__label--price"},_e=(0,s._)("span",{class:"form__value"},"От",-1),me={class:"form__label form__label--price"},pe=(0,s._)("span",{class:"form__value"},"До",-1),ge={class:"form__block"},he=(0,s._)("legend",{class:"form__legend"},"Категория",-1),fe={class:"form__label form__label--select"},ye=(0,s._)("option",{value:"0"},"Все категории",-1),be=["value"],ve={class:"form__block"},we=(0,s._)("legend",{class:"form__legend"},"Цвет",-1),ke={class:"colors colors--black"},Ie={class:"colors__label"},De=["value"],Ce={class:"form__block"},Pe=(0,s._)("legend",{class:"form__legend"},"Материал",-1),Fe={class:"check-list"},$e={class:"check-list__label"},Le=["value"],ze={class:"check-list__desc"},Ae={class:"form__block"},Se=(0,s._)("legend",{class:"form__legend"},"Коллекция",-1),Ve={class:"check-list"},Te={class:"check-list__label"},xe=["value"],Me={class:"check-list__desc"},Ue=(0,s._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function Ee(e,t,a,i,o,l){const n=(0,s.up)("base-loader");return l.isLoading?((0,s.wg)(),(0,s.iD)("aside",re,[(0,s._)("div",se,[(0,s.Wm)(n)])])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("aside",ie,le)):((0,s.wg)(),(0,s.iD)("aside",ne,[(0,s._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>l.setFilters&&l.setFilters(...e)),["prevent"]))},[(0,s._)("fieldset",ce,[de,(0,s._)("label",ue,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"number",name:"min-price","onUpdate:modelValue":t[0]||(t[0]=e=>o.currentPriceFrom=e)},null,512),[[r.nr,o.currentPriceFrom,void 0,{number:!0}]]),_e]),(0,s._)("label",me,[(0,s.wy)((0,s._)("input",{class:"form__input",type:"number",name:"max-price","onUpdate:modelValue":t[1]||(t[1]=e=>o.currentPriceTo=e)},null,512),[[r.nr,o.currentPriceTo,void 0,{number:!0}]]),pe])]),(0,s._)("fieldset",ge,[he,(0,s._)("label",fe,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>o.currentCategoryId=e)},[ye,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.categories,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,m.zw)(e.title),9,be)))),128))],512),[[r.bM,o.currentCategoryId]])])]),(0,s._)("fieldset",ve,[we,(0,s._)("ul",ke,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",Ie,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"checkbox",name:"color",value:e.id,"onUpdate:modelValue":t[3]||(t[3]=e=>o.currentColorId=e)},null,8,De),[[r.e8,o.currentColorId]]),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.code})},null,4)])])))),128))])]),(0,s._)("fieldset",Ce,[Pe,(0,s._)("ul",Fe,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.materials,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:e.id},[(0,s._)("label",$e,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"material",value:e.id,"onUpdate:modelValue":t[4]||(t[4]=e=>o.currentMaterialId=e)},null,8,Le),[[r.e8,o.currentMaterialId]]),(0,s._)("span",ze,[(0,s.Uk)((0,m.zw)(e.title)+" ",1),(0,s._)("span",null,"("+(0,m.zw)(e.productsCount)+")",1)])])])))),128))])]),(0,s._)("fieldset",Ae,[Se,(0,s._)("ul",Ve,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.seasons,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"check-list__item",key:e.id},[(0,s._)("label",Te,[(0,s.wy)((0,s._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"collection",value:e.id,"onUpdate:modelValue":t[5]||(t[5]=e=>o.currentSeasonId=e)},null,8,xe),[[r.e8,o.currentSeasonId]]),(0,s._)("span",Me,[(0,s.Uk)((0,m.zw)(e.title)+" ",1),(0,s._)("span",null,"("+(0,m.zw)(e.productsCount)+")",1)])])])))),128))])]),Ue,l.isResetBtnVisible?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"filter__reset button button--second",type:"button",onClick:t[6]||(t[6]=(...e)=>l.resetFilters&&l.resetFilters(...e))}," Сбросить ")):(0,s.kq)("",!0)],32)]))}var Ke={emits:["change-filters"],props:["filters"],data(){return{currentPriceFrom:this.filters.filterPriceFrom,currentPriceTo:this.filters.filterPriceTo,currentCategoryId:this.filters.filterCategoryId,currentColorId:this.filters.filterColorId,currentMaterialId:this.filters.filterMaterialId,currentSeasonId:this.filters.filterSeasonId}},computed:{colors(){return this.$store.state.colorsData},materials(){return this.$store.state.materialsData},seasons(){return this.$store.state.seasonsData},categories(){return this.$store.state.categoriesData},productFilters(){return{filterPriceFrom:this.currentPriceFrom,filterPriceTo:this.currentPriceTo,filterCategoryId:this.currentCategoryId,filterColorId:this.currentColorId,filterMaterialId:this.currentMaterialId,filterSeasonId:this.currentSeasonId}},isLoading(){return this.$store.state.areFiltersLoading},isLoadingFailed(){return this.$store.state.areFiltersLoadingFailed},isResetBtnVisible(){return Object.values(this.filters).some((e=>void 0!==e.length?e.length:e))}},methods:{async loadFilters(){this.$store.dispatch("loadFilters")},setFilters(){this.$emit("change-filters",this.productFilters)},resetFilters(){this.currentPriceFrom=0,this.currentPriceTo=0,this.currentCategoryId=0,this.currentColorId=[],this.currentMaterialId=[],this.currentSeasonId=[],this.$router.replace({query:null}),this.setFilters()}},created(){this.$store.dispatch("loadFilters")}};const Oe=(0,v.Z)(Ke,[["render",Ee]]);var We=Oe;const je={class:"catalog__list"};function qe(e,t,a,r,i,o){const l=(0,s.up)("products-item");return(0,s.wg)(),(0,s.iD)("ul",je,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.products,(e=>((0,s.wg)(),(0,s.j4)(l,{key:e.id,id:e.id,title:e.title,price:e.price,colors:e.colors,images:e.images},null,8,["id","title","price","colors","images"])))),128))])}const Ze={class:"catalog__item"},He=["src","alt"],Ye={key:1,src:"assets/no-image.jpg"},Be={class:"catalog__title"},Qe={class:"catalog__price"},Re={class:"colors colors--black"},Ge=["onClick"],Je=["name","value","checked"];function Ne(e,t,a,i,o,l){const n=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("li",Ze,[(0,s.Wm)(n,{class:"catalog__pic",to:{name:"product",params:{id:a.id}}},{default:(0,s.w5)((()=>[a.images[o.activeImgIdx]&&a.images[o.activeImgIdx].file?((0,s.wg)(),(0,s.iD)("img",{key:0,src:a.images[o.activeImgIdx].file.url,alt:a.title},null,8,He)):((0,s.wg)(),(0,s.iD)("img",Ye))])),_:1},8,["to"]),(0,s._)("h3",Be,[(0,s.Wm)(n,{to:{name:"product",params:{id:a.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(a.title),1)])),_:1},8,["to"])]),(0,s._)("span",Qe,(0,m.zw)(a.price)+" ₽ ",1),(0,s._)("ul",Re,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",{class:"colors__label",onClick:(0,r.iM)((t=>l.changeImg(e.id)),["prevent"])},[(0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color-"+a.id,value:e.color.code,checked:e.id===l.activeImgId},null,8,Je),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.color.code})},null,4)],8,Ge)])))),128))])])}var Xe={props:["id","title","price","colors","images"],data(){return{activeImgIdx:0}},computed:{activeImgId(){return this.colors[this.activeImgIdx].id}},methods:{changeImg(e){const t=this.colors.findIndex((t=>t.id===e));this.activeImgIdx=t}}};const et=(0,v.Z)(Xe,[["render",Ne]]);var tt=et,at={components:{ProductsItem:tt},props:["products"]};const rt=(0,v.Z)(at,[["render",qe]]);var st=rt;const it={class:"catalog__pagination pagination"},ot={class:"pagination__item"},lt=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-left"})],-1),nt=[lt],ct=["onClick"],dt={class:"pagination__item"},ut=(0,s._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-arrow-right"})],-1),_t=[ut];function mt(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("ul",it,[(0,s._)("li",ot,[(0,s._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===a.page}]),"aria-label":"Предыдущая страница",onClick:t[0]||(t[0]=e=>o.paginate(a.page-1))},nt,2)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.pagesTotal,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"pagination__item",key:e},[(0,s._)("a",{class:(0,m.C_)(["pagination__link",{"pagination__link--current":a.page===e}]),onClick:t=>o.paginate(e)},(0,m.zw)(e),11,ct)])))),128)),(0,s._)("li",dt,[(0,s._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":a.page===o.pagesTotal}]),href:"#","aria-label":"Следующая страница",onClick:t[1]||(t[1]=e=>o.paginate(a.page+1))},_t,2)])])}var pt={emits:["changePage"],props:["page","perPage","total"],computed:{pagesTotal(){return Math.ceil(this.total/this.perPage)}},methods:{paginate(e){e>0&&e<=this.pagesTotal&&this.$emit("changePage",e)}}};const gt=(0,v.Z)(pt,[["render",mt]]);var ht=gt,ft={components:{ProductsFilter:We,ProductsList:st,BasePagination:ht},data(){return{page:1,productsPerPage:12,filters:{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:[],filterMaterialId:[],filterSeasonId:[]}}},computed:{productsData(){return this.$store.state.productsData},products(){return this.productsData?this.productsData.items.map((e=>({...e,images:e.colors.flatMap((e=>e.gallery||[])).filter((e=>null!==e))}))):[]},total(){return this.productsData?this.productsData.pagination.total:0},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},methods:{loadProducts(){this.$store.dispatch("loadProducts",{page:this.page,limit:this.productsPerPage,minPrice:this.filters.filterPriceFrom,maxPrice:this.filters.filterPriceTo,categoryId:this.filters.filterCategoryId,materialIds:this.filters.filterMaterialId,seasonIds:this.filters.filterSeasonId,colorIds:this.filters.filterColorId})},setFilters(e){this.filters=e},setPage(e){this.page=e}},watch:{filters(){this.page=1,this.loadProducts()},page(){this.loadProducts()},$route(){this.loadProducts()},productsPerPage(){this.loadProducts()}},created(){this.filters.filterCategoryId=this.$route.query.categoryId||0,this.loadProducts()}};const yt=(0,v.Z)(ft,[["render",ae]]);var bt=yt;const vt={key:0,class:"content container"},wt={class:"loader-wrapper"},kt={key:1,class:"content container"},It=(0,s._)("h1",null,"Произошла ошибка при загрузке корзины. Попробуйте ещё раз!",-1),Dt=[It],Ct={key:2,class:"content container"},Pt={class:"content__top"},Ft={class:"breadcrumbs"},$t={class:"breadcrumbs__item"},Lt=(0,s.Uk)(" Каталог "),zt=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),At={class:"content__row"},St=(0,s._)("h1",{class:"content__title"},"Корзина",-1),Vt={class:"content__info"},Tt={class:"cart"},xt={class:"cart__form form",action:"#",method:"POST"},Mt={class:"cart__field"},Ut={class:"cart__list"},Et={class:"cart__block"},Kt=(0,s._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),Ot={class:"cart__price"},Wt=(0,s.Uk)(" Итого: "),jt=(0,s.Uk)(" Оформить заказ ");function qt(e,t,a,r,i,o){const l=(0,s.up)("base-loader"),n=(0,s.up)("router-link"),c=(0,s.up)("cart-item");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",vt,[(0,s._)("div",wt,[(0,s.Wm)(l)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",kt,Dt)):((0,s.wg)(),(0,s.iD)("main",Ct,[(0,s._)("div",Pt,[(0,s._)("ul",Ft,[(0,s._)("li",$t,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Lt])),_:1})]),zt]),(0,s._)("div",At,[St,(0,s._)("span",Vt," Количество товаров: "+(0,m.zw)(o.totalQuantity),1)])]),(0,s._)("section",Tt,[(0,s._)("form",xt,[(0,s._)("div",Mt,[(0,s._)("ul",Ut,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cart,(e=>((0,s.wg)(),(0,s.j4)(c,{key:e.id,size:e.size.title,title:e.product.title,img:e.color.gallery[0].file.url,"basket-item-id":e.id,"item-id":e.product.id,"color-code":e.color.color.code,"color-title":e.color.color.title,price:e.product.price,amount:e.quantity},null,8,["size","title","img","basket-item-id","item-id","color-code","color-title","price","amount"])))),128))])]),(0,s._)("div",Et,[Kt,(0,s._)("p",Ot,[Wt,(0,s._)("span",null,(0,m.zw)(o.totalPrice)+" ₽",1)]),o.cart.length?((0,s.wg)(),(0,s.j4)(n,{key:0,class:"cart__button button button--primery",type:"submit",to:{name:"order"}},{default:(0,s.w5)((()=>[jt])),_:1})):(0,s.kq)("",!0)])])])]))}const Zt={class:"cart__item product"},Ht={class:"product__pic"},Yt=["src","alt"],Bt={class:"product__title"},Qt={class:"product__info product__info--color"},Rt=(0,s.Uk)(" Цвет: "),Gt=(0,s._)("br",null,null,-1),Jt=(0,s._)("br",null,null,-1),Nt={class:"product__code"},Xt={class:"product__price"},ea={class:"product__status"},ta={key:0,class:"product__error"},aa=(0,s._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-close"})],-1),ra=[aa];function sa(e,t,a,i,o,l){const n=(0,s.up)("base-item-counter");return(0,s.wg)(),(0,s.iD)("li",Zt,[(0,s._)("div",Ht,[(0,s._)("img",{src:null!==a.img?a.img:"assets/no-image.jpg",width:"120",height:"120",alt:a.title},null,8,Yt)]),(0,s._)("h3",Bt,(0,m.zw)(a.title),1),(0,s._)("p",Qt,[Rt,(0,s._)("span",null,[(0,s._)("i",{style:(0,m.j5)({"background-color":a.colorCode})},null,4),(0,s.Uk)(" "+(0,m.zw)(a.colorTitle),1)]),Gt,Jt,(0,s.Uk)(" Размер: "+(0,m.zw)(a.size),1)]),(0,s._)("span",Nt," Артикул: "+(0,m.zw)(a.itemId),1),(0,s.Wm)(n,{modelValue:l.productAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>l.productAmount=e),itemAmount:a.amount,onChangeItemAmount:l.setItemAmount},null,8,["modelValue","itemAmount","onChangeItemAmount"]),(0,s._)("b",Xt,(0,m.zw)(a.price*l.productAmount)+" ₽ ",1),(0,s._)("div",ea,[o.isSendingFailed?((0,s.wg)(),(0,s.iD)("span",ta,"Что-то пошло не так. Попробуйте позже!")):(0,s.kq)("",!0)]),(0,s._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:t[1]||(t[1]=(0,r.iM)(((...e)=>l.deleteItem&&l.deleteItem(...e)),["prevent"]))},ra)])}var ia=a(6265),oa=a.n(ia);const la="https://vue-moire.skillbox.cc/api",na=["disabled"],ca=(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-minus"})],-1),da=[ca],ua=(0,s._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,s._)("use",{"xlink:href":"#icon-plus"})],-1),_a=[ua];function ma(e,t,a,i,o,l){return(0,s.wg)(),(0,s.iD)("div",{class:(0,m.C_)(["form__counter",{product__counter:"cart"===e.$route.name}])},[(0,s._)("button",{type:"button","aria-label":"Убрать один товар",disabled:1===a.itemAmount,onClick:t[0]||(t[0]=e=>l.changeItemAmount(a.itemAmount-1))},da,8,na),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.itemAmountVal=e),name:"count"},null,512),[[r.nr,l.itemAmountVal,void 0,{number:!0}]]),(0,s._)("button",{type:"button","aria-label":"Добавить один товар",onClick:t[2]||(t[2]=e=>l.changeItemAmount(a.itemAmount+1))},_a)],2)}var pa={props:["itemAmount"],emits:["changeItemAmount"],computed:{itemAmountVal:{get(){return this.itemAmount},set(e){e&&this.$emit("changeItemAmount",e)}}},methods:{changeItemAmount(e){e>=1&&this.$emit("changeItemAmount",e)}}};const ga=(0,v.Z)(pa,[["render",ma]]);var ha=ga,fa={components:{BaseItemCounter:ha},props:["title","img","basketItemId","itemId","colorCode","colorTitle","price","amount","size"],data(){return{isSending:!1,isSendingFailed:!1}},computed:{productAmount:{get(){return this.amount},async set(e){this.isSendingFailed=!1,this.$store.commit("updateCartProductQuantity",{productId:this.itemId,quantity:e});try{console.log(this.basketItemId),console.log(this.$store.state.userAccessKey);const{data:t}=await oa().put(`${la}/baskets/products`,{basketItemId:this.basketItemId,quantity:e},{params:{userAccessKey:this.$store.state.userAccessKey}});this.$store.commit("updateCart",t.items)}catch(t){this.isSendingFailed=!0,this.$store.commit("syncCartProducts")}}}},methods:{setItemAmount(e){this.productAmount=e},deleteItem(){this.$store.dispatch("deleteFromCart",{basketItemId:this.basketItemId,productId:this.itemId})}}};const ya=(0,v.Z)(fa,[["render",sa]]);var ba=ya,va={components:{CartItem:ba},computed:{isLoading(){return this.$store.state.isCartLoading},isLoadingFailed(){return this.$store.state.isCartLoadingFailed},cart(){return this.$store.getters.cartProductsData},totalPrice(){return this.$store.getters.cartTotalPrice},totalQuantity(){return this.$store.getters.cartTotalQuantity},error(){return this.$store.state.cartError}}};const wa=(0,v.Z)(va,[["render",qt]]);var ka=wa;const Ia={key:0,class:"content container"},Da={class:"loader-wrapper"},Ca={key:1,class:"content container"},Pa=(0,s._)("h1",null," Произошла ошибка при загрузке товара. Пожалуйста, попробуйте зайти сюда позже. ",-1),Fa=[Pa],$a={key:2,class:"content container"},La={class:"content__top"},za={class:"breadcrumbs"},Aa={class:"breadcrumbs__item"},Sa=(0,s.Uk)(" Каталог "),Va={class:"breadcrumbs__item"},Ta={class:"breadcrumbs__item"},xa={class:"breadcrumbs__link"},Ma={class:"item"},Ua={class:"item__pics pics"},Ea={class:"pics__wrapper"},Ka=["src","alt"],Oa={class:"pics__list"},Wa=["onClick"],ja=["src","alt"],qa={class:"item__info"},Za={class:"item__code"},Ha={class:"item__title"},Ya={class:"item__form"},Ba={class:"form",action:"#",method:"POST"},Qa={class:"item__row item__row--center"},Ra={class:"item__price"},Ga={class:"item__row"},Ja={class:"form__block"},Na=(0,s._)("legend",{class:"form__legend"},"Цвет",-1),Xa={class:"colors colors--black"},er={class:"colors__label"},tr=["value","checked"],ar={class:"form__block"},rr=(0,s._)("legend",{class:"form__legend"},"Размер",-1),sr={class:"form__label form__label--small form__label--select"},ir=["value"],or=["disabled"],lr={key:0},nr={key:1},cr={key:2},dr={class:"item__desc"},ur={class:"tabs"},_r={class:"tabs__item"},mr={class:"tabs__item"};function pr(e,t,a,i,o,l){const n=(0,s.up)("base-loader"),c=(0,s.up)("router-link"),d=(0,s.up)("base-item-counter");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",Ia,[(0,s._)("div",Da,[(0,s.Wm)(n)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",Ca,Fa)):((0,s.wg)(),(0,s.iD)("main",$a,[(0,s._)("div",La,[(0,s._)("ul",za,[(0,s._)("li",Aa,[(0,s.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Sa])),_:1})]),(0,s._)("li",Va,[(0,s.Wm)(c,{class:"breadcrumbs__link",to:{name:"main",query:{categoryId:l.product.category.id}}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,m.zw)(l.product.category.title),1)])),_:1},8,["to"])]),(0,s._)("li",Ta,[(0,s._)("a",xa,(0,m.zw)(l.product.title),1)])])]),(0,s._)("section",Ma,[(0,s._)("div",Ua,[(0,s._)("div",Ea,[(0,s._)("img",{width:"570",height:"570",src:l.gallery[o.activeColorIdx].image,alt:l.product.title},null,8,Ka)]),(0,s._)("ul",Oa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.gallery,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"pics__item",key:e.id},[(0,s._)("a",{href:"",class:(0,m.C_)(["pics__link",{"pics__link--current":e.id===l.activeColorId}]),onClick:(0,r.iM)((t=>l.changeImg(e.id)),["prevent"])},[(0,s._)("img",{width:"98",height:"98",src:e.image,alt:l.product.title},null,8,ja)],10,Wa)])))),128))])]),(0,s._)("div",qa,[(0,s._)("span",Za,"Артикул: "+(0,m.zw)(l.product.id),1),(0,s._)("h2",Ha,(0,m.zw)(l.product.title),1),(0,s._)("div",Ya,[(0,s._)("form",Ba,[(0,s._)("div",Qa,[(0,s.Wm)(d,{modelValue:o.productAmount,"onUpdate:modelValue":t[0]||(t[0]=e=>o.productAmount=e),itemAmount:o.productAmount,onChangeItemAmount:l.setItemAmount},null,8,["modelValue","itemAmount","onChangeItemAmount"]),(0,s._)("b",Ra,(0,m.zw)(l.product.price)+" ₽ ",1)]),(0,s._)("div",Ga,[(0,s._)("fieldset",Ja,[Na,(0,s._)("ul",Xa,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.colors,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"colors__item",key:e.id},[(0,s._)("label",er,[(0,s.wy)((0,s._)("input",{class:"colors__radio sr-only",type:"radio",name:"color",value:e.color.id,checked:l.activeColorId===e.color.id,"onUpdate:modelValue":t[1]||(t[1]=e=>l.activeColorId=e)},null,8,tr),[[r.G2,l.activeColorId]]),(0,s._)("span",{class:"colors__value",style:(0,m.j5)({"background-color":e.color.code})},null,4)])])))),128))])]),(0,s._)("fieldset",ar,[rr,(0,s._)("label",sr,[(0,s.wy)((0,s._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=e=>l.activeSizeId=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.product.sizes,(e=>((0,s.wg)(),(0,s.iD)("option",{value:e.id,key:e.id},(0,m.zw)(e.title),9,ir)))),128))],512),[[r.bM,l.activeSizeId]])])])]),(0,s._)("button",{class:"item__button button button--primery",type:"submit",disabled:o.isSending,onClick:t[3]||(t[3]=(0,r.iM)(((...e)=>l.addToCart&&l.addToCart(...e)),["prevent"]))}," В корзину ",8,or),o.isSending?((0,s.wg)(),(0,s.iD)("p",lr,"Добавляем товар в корзину...")):(0,s.kq)("",!0),o.isSendingFailed?((0,s.wg)(),(0,s.iD)("p",nr," Произошла ошибка при добавлении товара в корзину. Попробуйте ещё раз! ")):o.isAdded?((0,s.wg)(),(0,s.iD)("p",cr,"Товар успешно добавлен в корзину!")):(0,s.kq)("",!0)])])]),(0,s._)("div",dr,[(0,s._)("ul",ur,[(0,s._)("li",_r,[(0,s._)("a",{class:(0,m.C_)(["tabs__link",{"tabs__link--current":"base-item-content"===o.selectedTab}]),onClick:t[4]||(t[4]=e=>l.setSelectedComponent("base-item-content"))}," Информация о товаре ",2)]),(0,s._)("li",mr,[(0,s._)("a",{class:(0,m.C_)(["tabs__link",{"tabs__link--current":"base-item-delivery"===o.selectedTab}]),onClick:t[5]||(t[5]=e=>l.setSelectedComponent("base-item-delivery"))}," Доставка и возврат ",2)])]),((0,s.wg)(),(0,s.j4)((0,s.LL)(o.selectedTab)))])])]))}a(1703);const gr={class:"item__content"},hr=(0,s.uE)("<h3>Состав:</h3><p> 60% хлопок<br> 30% полиэстер<br></p><h3>Уход:</h3><p> Машинная стирка при макс. 30ºC короткий отжим<br> Гладить при макс. 110ºC<br> Не использовать машинную сушку<br> Отбеливать запрещено<br> Не подвергать химчистке<br></p>",4),fr=[hr];function yr(e,t){return(0,s.wg)(),(0,s.iD)("div",gr,fr)}const br={},vr=(0,v.Z)(br,[["render",yr]]);var wr=vr;const kr={class:"item__content"},Ir=(0,s.uE)("<h3>Оплата товара:</h3><p> Оплата возможно несколькими способами. При замере покупатель может внести часть суммы заказа, но не менее 70%. Оставшуюся часть вносят после монтажа Вашего изделия. Оплата производится наличным платежом. Другой вариант: перечислением по безналичному расчету всей суммы заказа банковским переводом или банковской картой по номеру заказа у нас на сайте. </p><h3>Доставка и Приемка товара:</h3><p> Мы осуществляем доставку товара собственной службой доставки в согласованное с Вами время. Период доставки с 10.00 до 19.00. Доставка в праздничные и выходные дни согласовывается с менеджером вашего заказа.<br> При приемке товара необходимо в присутствии водителя-экспедитора (монтажника):<br> Совершить все необходимые действия, обеспечивающие принятие товаров - принятые покупателем (получателем) товары должны быть им осмотрены, проверены количество и качество.<br> После совершения указанных действий Покупатель (получатель) либо расписывается в графе: &quot;Заказ принял, комплектность полная, услуги по доставке оказаны, претензий к количеству и внешнему виду товара не имею. С условиями возврата товара ознакомлен&quot;. После получения заказа претензии к внешним дефектам товара, его количеству, комплектности и товарному виду не принимаются, либо составляет акт о выявленных недостатках в двух экземплярах. Ставя свою подпись, Покупатель (получатель) подтверждает, что он является уполномоченным на получение товара лицом.<br> В случае если товар привезен не в полном объеме, присутствует пересорт, бой или брак, довоз товара производится за счет продавца в согласованный сторонами срок при наличии товара на складе или в срок 2-3 рабочих дня после поступления заказного товара на склад, в случае его отсутствия.<br></p><h3>Условия возврата товара надлежащего качества:</h3><p> Возврат товара надлежащего качества, приобретённого через наш интернет-магазин, возможен в случае, если он не был в употреблении, имеются заводские ярлыки, бирки и т.п., сохранены его товарный вид, потребительские свойства, а также документ, подтверждающий факт и условия покупки указанного товара.<br> Не подлежат возврату товары, входящие в перечень непродовольственных товаров надлежащего качества, не подходящих возврату или обмену на аналогичный товар других размера, формы, габарита, фасона, расцветки или комплектации.<br> Покупатель вправе отказаться от товара, приобретенного через наш интернет-магазин, после его передачи в течение 7 дней (согласно Закону РФ &quot;О защите прав потребителей&quot;, статьи 26.1 о Дистанционном способе продаже товаров).<br> Для возврата товара необходим документ, удостоверяющий личность (паспорт гражданина РФ/загранпаспорт, временное удостоверение личности гражданина РФ, выдаваемое на период оформления паспорта).<br></p>",6),Dr=[Ir];function Cr(e,t){return(0,s.wg)(),(0,s.iD)("div",kr,Dr)}const Pr={},Fr=(0,v.Z)(Pr,[["render",Cr]]);var $r=Fr,Lr={components:{BaseItemCounter:ha,BaseItemContent:wr,BaseItemDelivery:$r},data(){return{productAmount:1,isLoading:!1,isLoadingFailed:!1,isSending:!1,isSendingFailed:!1,isAdded:!1,productData:null,activeColorIdx:0,activeSizeIdx:0,selectedTab:"base-item-content"}},computed:{product(){return{...this.productData,gallery:this.productData.colors.map((e=>({id:e.color.id,image:e.gallery?e.gallery[0].file.url:"assets/no-image.jpg"})))}},gallery(){return this.product.gallery},activeColorId:{get(){return this.gallery[this.activeColorIdx].id},set(e){const t=this.gallery.findIndex((t=>t.id===e));this.activeColorIdx=t}},activeSizeId:{get(){return this.product.sizes[this.activeSizeIdx].id},set(e){const t=this.product.sizes.findIndex((t=>t.id===e));this.activeSizeIdx=t}}},methods:{async loadProduct(){this.isLoading=!0,this.isLoadingFailed=!1;try{const{data:e}=await oa().get(`${la}/products/${this.$route.params.id}`);this.productData=e}catch(e){this.isLoading=!1,this.isLoadingFailed=!0}this.isLoading=!1},setItemAmount(e){this.productAmount=e},changeImg(e){const t=this.gallery.findIndex((t=>t.id===e));this.activeColorIdx=t},async addToCart(){this.isSending=!0,this.isAdded=!1,this.isSendingFailed=!1;try{if(await this.$store.dispatch("addToCart",{productId:this.product.id,colorId:this.activeColorId,sizeId:this.activeSizeId,quantity:this.productAmount}),this.$store.state.isSendingFailed)throw new Error}catch(e){this.isSendingFailed=!0}this.isSending=!1,this.isAdded=!0},setSelectedComponent(e){this.selectedTab=e}},created(){this.loadProduct()}};const zr=(0,v.Z)(Lr,[["render",pr]]);var Ar=zr;const Sr={class:"content container"},Vr={class:"content__top"},Tr={class:"breadcrumbs"},xr={class:"breadcrumbs__item"},Mr=(0,s.Uk)(" Каталог "),Ur={class:"breadcrumbs__item"},Er=(0,s.Uk)(" Корзина "),Kr=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Or=(0,s._)("div",{class:"content__row"},[(0,s._)("h1",{class:"content__title"},"Оформление заказа")],-1),Wr={class:"cart"},jr={key:0,class:"loader-wrapper"},qr={key:1,class:"cart__field"},Zr={class:"cart__data"},Hr={key:0,class:"cart__options"},Yr={class:"loader-wrapper"},Br={key:1,class:"cart__options"},Qr=(0,s._)("h2",null,"Возникла ошибка при загрузке товаров. Попробуйте позже.",-1),Rr=[Qr],Gr={key:2,class:"cart__options"},Jr=(0,s._)("h3",{class:"cart__title"},"Доставка",-1),Nr={class:"cart__options options"},Xr={key:0,class:"form__error"},es=(0,s._)("h3",{class:"cart__title"},"Оплата",-1),ts={class:"cart__options options"},as={key:1,class:"form__error"},rs={class:"cart__block"},ss={class:"cart__orders"},is={class:"cart__total"},os=(0,s.Uk)(" Доставка: "),ls=(0,s.Uk)(" Итого: "),ns=(0,s.Uk)(" товара на сумму "),cs=["disabled"],ds={key:2,class:"cart__error form__error-block"},us=(0,s._)("h4",null,"Заявка не отправлена!",-1);function _s(e,t,a,i,o,l){const n=(0,s.up)("router-link"),c=(0,s.up)("base-loader"),d=(0,s.up)("base-form-text-field"),u=(0,s.up)("base-form-textarea"),_=(0,s.up)("base-form-radio-delivery"),p=(0,s.up)("base-form-radio-payment");return(0,s.wg)(),(0,s.iD)("main",Sr,[(0,s._)("div",Vr,[(0,s._)("ul",Tr,[(0,s._)("li",xr,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[Mr])),_:1})]),(0,s._)("li",Ur,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,s.w5)((()=>[Er])),_:1})]),Kr]),Or]),(0,s._)("section",Wr,[(0,s._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:t[7]||(t[7]=(0,r.iM)(((...e)=>l.sendOrder&&l.sendOrder(...e)),["prevent"]))},[l.isSending?((0,s.wg)(),(0,s.iD)("div",jr,[(0,s.Wm)(c)])):((0,s.wg)(),(0,s.iD)("div",qr,[(0,s._)("div",Zr,[(0,s.Wm)(d,{title:"ФИО",placeholder:"Введите ваше имя",error:l.formError.name,modelValue:o.formData.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.name=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Адрес доставки",placeholder:"Введите ваш адрес",error:l.formError.address,modelValue:o.formData.address,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.address=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Телефон",placeholder:"Введите ваш телефон",error:l.formError.phone,modelValue:o.formData.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.phone=e)},null,8,["error","modelValue"]),(0,s.Wm)(d,{title:"Email",placeholder:"Введите ваш Email",error:l.formError.email,modelValue:o.formData.email,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.email=e)},null,8,["error","modelValue"]),(0,s.Wm)(u,{title:"Комментарии к заказу",placeholder:"Ваши пожелания",error:l.formError.comments,modelValue:o.formData.comments,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.comments=e)},null,8,["error","modelValue"])]),l.isLoading?((0,s.wg)(),(0,s.iD)("div",Hr,[(0,s._)("div",Yr,[(0,s.Wm)(c)])])):l.isLoadingFailed?((0,s.wg)(),(0,s.iD)("div",Br,Rr)):((0,s.wg)(),(0,s.iD)("div",Gr,[Jr,(0,s._)("ul",Nr,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.deliveries,(e=>((0,s.wg)(),(0,s.j4)(_,{key:e.id,group:"delivery",value:e.id,title:e.title,price:e.price,modelValue:o.formData.deliveryId,"onUpdate:modelValue":t[5]||(t[5]=e=>o.formData.deliveryId=e)},null,8,["value","title","price","modelValue"])))),128))]),l.formError.deliveryTypeId?((0,s.wg)(),(0,s.iD)("span",Xr,(0,m.zw)(l.formError.deliveryTypeId),1)):(0,s.kq)("",!0),es,(0,s._)("ul",ts,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.payments,(e=>((0,s.wg)(),(0,s.j4)(p,{key:e.id,group:"pay",title:e.title,value:e.id,modelValue:o.formData.paymentId,"onUpdate:modelValue":t[6]||(t[6]=e=>o.formData.paymentId=e)},null,8,["title","value","modelValue"])))),128))]),l.formError.paymentTypeId?((0,s.wg)(),(0,s.iD)("span",as,(0,m.zw)(l.formError.paymentTypeId),1)):(0,s.kq)("",!0)]))])),(0,s._)("div",rs,[(0,s._)("ul",ss,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.cart,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:e.id},[(0,s._)("h3",null,(0,m.zw)(e.product.title),1),(0,s._)("b",null,(0,m.zw)(e.product.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,m.zw)(e.product.id),1)])))),128))]),(0,s._)("div",is,[(0,s._)("p",null,[os,(0,s._)("b",null,(0,m.zw)(l.deliveryPrice?`${l.deliveryPrice} ₽`:"бесплатно"),1)]),(0,s._)("p",null,[ls,(0,s._)("b",null,(0,m.zw)(l.totalQuantity),1),ns,(0,s._)("b",null,(0,m.zw)(l.totalPrice)+" ₽",1)])]),(0,s._)("button",{class:"cart__button button button--primery",type:"submit",disabled:l.isLoading||l.isLoadingFailed}," Оформить заказ ",8,cs)]),l.orderErrorMessage?((0,s.wg)(),(0,s.iD)("div",ds,[us,(0,s._)("p",null,(0,m.zw)(l.orderErrorMessage||"Похоже произошла ошибка. Попробуйте отправить снова или перезагрузите страницу."),1)])):(0,s.kq)("",!0)],32)])])}const ms=["placeholder"];function ps(e,t,a,i,o,l){const n=(0,s.up)("base-form-field");return(0,s.wg)(),(0,s.j4)(n,{title:e.title,error:e.error},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("input",{class:"form__input",type:"text",name:"name",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,ms),[[r.nr,e.value]])])),_:1},8,["title","error"])}const gs={class:"form__label"},hs={class:"form__value"},fs={key:0,class:"form__error"};function ys(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("label",gs,[(0,s.WI)(e.$slots,"default"),(0,s._)("span",hs,(0,m.zw)(a.title),1),a.error?((0,s.wg)(),(0,s.iD)("span",fs,(0,m.zw)(a.error),1)):(0,s.kq)("",!0)])}var bs={props:["title","error"]};const vs=(0,v.Z)(bs,[["render",ys]]);var ws=vs,ks={components:{BaseFormField:ws},emits:["update:modelValue"],props:["title","error","placeholder","modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Is={mixins:[ks]};const Ds=(0,v.Z)(Is,[["render",ps]]);var Cs=Ds;const Ps=["placeholder"];function Fs(e,t,a,i,o,l){const n=(0,s.up)("base-form-field");return(0,s.wg)(),(0,s.j4)(n,{title:e.title,error:e.error},{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("textarea",{class:"form__input form__input--area",name:"comments",placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t)},null,8,Ps),[[r.nr,e.value]])])),_:1},8,["title","error"])}var $s={mixins:[ks]};const Ls=(0,v.Z)($s,[["render",Fs]]);var zs=Ls;const As={class:"options__value"};function Ss(e,t,a,r,i,o){const l=(0,s.up)("base-form-radio");return(0,s.wg)(),(0,s.j4)(l,{group:a.group},{default:(0,s.w5)((()=>[(0,s._)("span",As,[(0,s.Uk)((0,m.zw)(a.title)+" ",1),(0,s._)("b",null,(0,m.zw)(+a.price?`${a.price} ₽`:"бесплатно"),1)])])),_:1},8,["group"])}const Vs={class:"options__item"},Ts={class:"options__label"},xs=["name","value"];function Ms(e,t,a,i,o,l){return(0,s.wg)(),(0,s.iD)("li",Vs,[(0,s._)("label",Ts,[(0,s.wy)((0,s._)("input",{class:"options__radio sr-only",type:"radio",name:e.group,value:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t)},null,8,xs),[[r.G2,e.dataValue]]),(0,s.WI)(e.$slots,"default")])])}var Us={emits:["update:modelValue"],props:["modelValue","value","group","error"],computed:{dataValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},Es={mixins:[Us]};const Ks=(0,v.Z)(Es,[["render",Ms]]);var Os=Ks,Ws={components:{BaseFormRadio:Os},props:["title","price","group"]};const js=(0,v.Z)(Ws,[["render",Ss]]);var qs=js;const Zs={class:"options__value"};function Hs(e,t,a,r,i,o){const l=(0,s.up)("base-form-radio");return(0,s.wg)(),(0,s.j4)(l,{group:a.group},{default:(0,s.w5)((()=>[(0,s._)("span",Zs,(0,m.zw)(a.title),1)])),_:1},8,["group"])}var Ys={components:{BaseFormRadio:Os},props:["title","group"]};const Bs=(0,v.Z)(Ys,[["render",Hs]]);var Qs=Bs,Rs={components:{BaseFormTextField:Cs,BaseFormTextarea:zs,BaseFormRadioDelivery:qs,BaseFormRadioPayment:Qs},data(){return{formData:{name:null,address:null,phone:null,email:null,comments:null,paymentId:1,deliveryId:1}}},computed:{cart(){return this.$store.state.cartProductsData},totalPrice(){return this.$store.getters.cartTotalPrice+this.deliveryPrice},totalQuantity(){return this.$store.getters.cartTotalQuantity},payments(){return this.$store.state.paymentsData},deliveries(){return this.$store.state.deliveriesData},deliveryPrice(){return this.deliveries?+this.deliveries.find((e=>e.id===this.formData.deliveryId)).price:0},formError(){return this.$store.state.orderErrorInfo||{}},formErrorMessage(){return this.$store.state.formErrorMessage},orderErrorMessage(){return this.$store.state.orderErrorMessage},isSending(){return this.$store.state.isSending},isSendingFailed(){return this.$store.state.isSendingFailed},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},methods:{sendOrder(){this.$store.dispatch("sendOrder",{name:this.formData.name,address:this.formData.address,phone:this.formData.phone,email:this.formData.email,deliveryTypeId:this.formData.deliveryId,paymentTypeId:this.formData.paymentId,comments:this.formData.comments})},loadPayments(){this.$store.dispatch("loadPayments",{deliveryTypeId:this.formData.deliveryId})}},watch:{"formData.deliveryId"(){this.loadPayments(),this.formData.paymentId=null}},created(){this.$store.dispatch("loadDeliveries"),this.loadPayments()}};const Gs=(0,v.Z)(Rs,[["render",_s]]);var Js=Gs;const Ns={key:0,class:"content container"},Xs={class:"loader-wrapper"},ei={key:1,class:"content container"},ti=(0,s._)("h1",null,"Произошла ошибка при загрузке корзины. Попробуйте ещё раз!",-1),ai=[ti],ri={key:2,class:"content container"},si={class:"content__top"},ii={class:"breadcrumbs"},oi={class:"breadcrumbs__item"},li=(0,s.Uk)(" Каталог "),ni=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link",to:{name:"cart"}}," Корзина ")],-1),ci=(0,s._)("li",{class:"breadcrumbs__item"},[(0,s._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),di={class:"content__title"},ui=(0,s.Uk)(" Заказ оформлен "),_i={class:"cart"},mi={class:"cart__form form",action:"#",method:"POST"},pi={class:"cart__field"},gi=(0,s._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),hi={class:"dictionary"},fi={class:"dictionary__item"},yi=(0,s._)("span",{class:"dictionary__key"}," Получатель ",-1),bi={class:"dictionary__value"},vi={class:"dictionary__item"},wi=(0,s._)("span",{class:"dictionary__key"}," Адрес доставки ",-1),ki={class:"dictionary__value"},Ii={class:"dictionary__item"},Di=(0,s._)("span",{class:"dictionary__key"}," Телефон ",-1),Ci={class:"dictionary__value"},Pi={class:"dictionary__item"},Fi=(0,s._)("span",{class:"dictionary__key"}," Email ",-1),$i={class:"dictionary__value"},Li={class:"dictionary__item"},zi=(0,s._)("span",{class:"dictionary__key"}," Способ оплаты ",-1),Ai={class:"dictionary__value"},Si={class:"cart__block"},Vi={class:"cart__orders"},Ti={class:"cart__total"},xi=(0,s.Uk)(" Доставка: "),Mi=(0,s.Uk)(" Итого: "),Ui=(0,s.Uk)(" товара на сумму ");function Ei(e,t,a,r,i,o){const l=(0,s.up)("base-loader"),n=(0,s.up)("router-link");return o.isLoading?((0,s.wg)(),(0,s.iD)("main",Ns,[(0,s._)("div",Xs,[(0,s.Wm)(l)])])):o.isLoadingFailed?((0,s.wg)(),(0,s.iD)("main",ei,ai)):((0,s.wg)(),(0,s.iD)("main",ri,[(0,s._)("div",si,[(0,s._)("ul",ii,[(0,s._)("li",oi,[(0,s.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,s.w5)((()=>[li])),_:1})]),ni,ci]),(0,s._)("h1",di,[ui,(0,s._)("span",null,"№ "+(0,m.zw)(o.orderInfo.id),1)])]),(0,s._)("section",_i,[(0,s._)("form",mi,[(0,s._)("div",pi,[gi,(0,s._)("ul",hi,[(0,s._)("li",fi,[yi,(0,s._)("span",bi,(0,m.zw)(o.orderInfo.name),1)]),(0,s._)("li",vi,[wi,(0,s._)("span",ki,(0,m.zw)(o.orderInfo.address),1)]),(0,s._)("li",Ii,[Di,(0,s._)("span",Ci,(0,m.zw)(o.orderInfo.phone),1)]),(0,s._)("li",Pi,[Fi,(0,s._)("span",$i,(0,m.zw)(o.orderInfo.email),1)]),(0,s._)("li",Li,[zi,(0,s._)("span",Ai,(0,m.zw)(o.orderInfo.paymentType),1)])])]),(0,s._)("div",Si,[(0,s._)("ul",Vi,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.orderInfo.basket.items,(e=>((0,s.wg)(),(0,s.iD)("li",{class:"cart__order",key:e.id},[(0,s._)("h3",null,(0,m.zw)(e.product.title),1),(0,s._)("b",null,(0,m.zw)(e.product.price)+" ₽",1),(0,s._)("span",null,"Артикул: "+(0,m.zw)(e.product.id),1)])))),128))]),(0,s._)("div",Ti,[(0,s._)("p",null,[xi,(0,s._)("b",null,(0,m.zw)(+o.orderInfo.deliveryType.price?`${o.orderInfo.deliveryType.price} ₽`:"бесплатно"),1)]),(0,s._)("p",null,[Mi,(0,s._)("b",null,(0,m.zw)(o.orderInfo.basket.items.length),1),Ui,(0,s._)("b",null,(0,m.zw)(o.orderInfo.totalPrice)+" ₽",1)])])])])])]))}var Ki={computed:{orderInfo(){return this.$store.state.orderInfo},isLoading(){return this.$store.state.isLoading},isLoadingFailed(){return this.$store.state.isLoadingFailed}},created(){this.$store.dispatch("loadOrderInfo",this.$route.params.id)}};const Oi=(0,v.Z)(Ki,[["render",Ei]]);var Wi=Oi;function ji(e,t){return(0,s.wg)(),(0,s.iD)("h1",null,"Страница не найдена. Попробуйте поискать что-нибудь другое.")}const qi={},Zi=(0,v.Z)(qi,[["render",ji]]);var Hi=Zi;const Yi=[{path:"/Moire/",name:"main",component:bt},{path:"/Moire/cart",name:"cart",component:ka},{path:"/Moire/product/:id",name:"product",component:Ar},{path:"/Moire/order",name:"order",component:Js},{path:"/Moire/order/:id",name:"orderInfo",component:Wi},{path:"/Moire/notFound(.*)*",name:"notfound",component:Hi}],Bi=(0,M.p7)({history:(0,M.PO)(),routes:Yi});var Qi=Bi,Ri={cart(e){return e.cartData.map((t=>{const a=e.cartProductsData.find((e=>e.product.id===t.productId));return{...a,...t}}))},cartProductsData(e){return e.cartProductsData},cartTotalPrice(e,t){return t.cart.reduce(((e,t)=>e+t.price*t.quantity),0)},cartTotalQuantity(e,t){return t.cart.length}},Gi={setProducts(e,t){e.productsData=t},setProductData(e,t){e.productData=t},setCategories(e,t){e.categoriesData=t},setColors(e,t){e.colorsData=t},setMaterials(e,t){e.materialsData=t},setSeasons(e,t){e.seasonsData=t},setDeliveries(e,t){e.deliveriesData=t},setPayments(e,t){e.paymentsData=t},updateAccessKey(e,t){e.userAccessKey=t},syncCartProducts(e){e.cartData=e.cartProductsData.map((e=>({productId:e.product.id,quantity:e.quantity})))},updateCart(e,t){e.cartProductsData=t},updateCartProductQuantity(e,t){const a=e.cartData.find((e=>e.productId===t.productId));a&&(a.quantity=t.quantity)},deleteCartProduct(e,t){e.cartData=e.cartData.filter((e=>e.productId!==t.productId))},resetCart(e){e.cartProductsData=[],e.cartData=[]},updateOrderInfo(e,t){e.orderInfo=t},updateOrderError(e,t){e.orderErrorInfo=t},resetOrderError(e){e.orderErrorInfo=null},resetFormErrorMessage(e){e.formErrorMessage=null},updateOrderErrorMessage(e,t){e.orderErrorMessage=t}},Ji={async loadProducts(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await oa().get(`${la}/products`,{params:t});e.commit("setProducts",a)}catch(a){e.state.isLoadingFailed=!0,e.state.isLoading=!1}finally{e.state.isLoading=!1}},async loadFilters(e){e.state.areFiltersLoading=!0,e.state.areFiltersLoadingFailed=!1;try{const t=await oa().get(`${la}/productCategories`);e.commit("setCategories",t.data.items);const a=await oa().get(`${la}/colors`);e.commit("setColors",a.data.items);const r=await oa().get(`${la}/materials`);e.commit("setMaterials",r.data.items);const s=await oa().get(`${la}/seasons`);e.commit("setSeasons",s.data.items)}catch(t){e.state.areFiltersLoadingFailed=!0}finally{e.state.areFiltersLoading=!1}},async loadDeliveries(e){const{data:t}=await oa().get(`${la}/deliveries`);e.commit("setDeliveries",t)},async loadPayments(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await oa().get(`${la}/payments`,{params:t});e.commit("setPayments",a)}catch(a){e.state.isLoadingFailed=!0}finally{e.state.isLoading=!1}},async addToCart(e,t){e.state.isSending=!0,e.state.isSendingFailed=!1,e.state.isAdded=!1;try{const{data:a}=await oa().post(`${la}/baskets/products`,t,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateCart",a.items),e.commit("syncCartProducts")}catch(a){e.state.isSendingFailed=!0}e.state.isSending=!1,e.state.isAdded=!0},async loadCart(e){e.state.isCartLoading=!0,e.state.isCartLoadingFailed=!1;try{const{data:t}=await oa().get(`${la}/baskets`,{params:{userAccessKey:e.state.userAccessKey}});e.state.userAccessKey||(localStorage.setItem("userAccessKey",t.user.accessKey),e.commit("updateAccessKey",t.user.accessKey)),e.commit("updateCart",t.items),e.commit("syncCartProducts")}catch(t){e.state.isCartLoadingFailed=!0}finally{e.state.isCartLoading=!1}},async deleteFromCart(e,t){try{const{data:a}=await oa()["delete"](`${la}/baskets/products`,{params:{userAccessKey:e.state.userAccessKey},data:t});e.commit("updateCart",a.items),e.commit("syncCartProducts")}catch(a){e.commit("syncCartProducts")}},async sendOrder(e,t){e.state.isSending=!0,e.state.isSendingFailed=!1;try{e.commit("resetOrderError"),e.commit("resetFormErrorMessage");const{data:a}=await oa().post(`${la}/orders`,t,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateOrderInfo",a),e.commit("resetCart"),Qi.push({name:"orderInfo",params:{id:a.id}})}catch(a){e.state.isSendingFailed=!0,e.commit("updateOrderError",a.response.data.error.request),e.commit("updateOrderErrorMessage",a.response.data.error.message)}finally{e.state.isSending=!1}},async loadOrderInfo(e,t){e.state.isLoading=!0,e.state.isLoadingFailed=!1;try{const{data:a}=await oa().get(`${la}/orders/${t}`,{params:{userAccessKey:e.state.userAccessKey}});e.commit("updateOrderInfo",a)}catch(a){e.state.isLoadingFailed=!0}finally{e.state.isLoading=!1}}},Ni=(0,o.MT)({state:{productsData:null,productData:null,categoriesData:null,colorsData:null,materialsData:null,seasonsData:null,deliveriesData:null,paymentsData:null,areFiltersLoading:!1,areFiltersLoadingFailed:!1,userAccessKey:null,isLoading:!1,isLoadingFailed:!1,isSending:!1,isSendingFailed:!1,cartData:[],cartProductsData:[],cartError:null,isCartLoading:!1,isCartLoadingFailed:!1,orderInfo:null,orderErrorInfo:null,orderErrorMessage:null,formErrorMessage:null},getters:Ri,mutations:Gi,actions:Ji});const Xi={class:"lds-ring"},eo=(0,s._)("div",null,null,-1),to=(0,s._)("div",null,null,-1),ao=(0,s._)("div",null,null,-1),ro=(0,s._)("div",null,null,-1),so=[eo,to,ao,ro];function io(e,t,a,r,i,o){return(0,s.wg)(),(0,s.iD)("div",Xi,so)}var oo={props:["size"]};const lo=(0,v.Z)(oo,[["render",io]]);var no=lo;const co=(0,r.ri)(x);co.use(Ni),co.use(Qi),co.component("base-loader",no),co.mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,i){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],i=e[d][2];for(var l=!0,n=0;n<r.length;n++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(l=!1,i<o&&(o=i));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],l=r[1],n=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(n)var d=n(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunkmoire"]=self["webpackChunkmoire"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(5133)}));r=a.O(r)})();
//# sourceMappingURL=app.1386d661.js.map